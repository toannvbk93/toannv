(function(a){function b(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++){c=e[b].substr(0,e[b].indexOf("="));d=e[b].substr(e[b].indexOf("=")+1);c=c.replace(/^\s+|\s+$/g,"");if(c==a){return unescape(d)}}}function c(a,b,c){var d=new Date;d.setDate(d.getDate()+c);var e=escape(b)+(c==null?"":"; expires="+d.toUTCString());document.cookie=a+"="+e}function d(a){var c=b("username");if(c!=null&&c!=""){a.remove()}return false}function e(a){return a.toString().search(/^-?[0-9]+$/)==0}function f(b,c,d,e){var f=new Image;f.onload=function(){var d="<img src='"+b+"' width='16' height='16'/>";a("#"+c).html(d)};f.onerror=function(){e.find("#"+c).html(d)};f.src=b}a.fn.CevherLink=function(b){var g=a(this);d(g);var h={icon_src:"[x]",minimize:"[-]",maximize:"[+]",href:"none",text:"",border:"1px black solid",corner:"0px",text_color:"black",time:false,text_position:"top",text_font:"Arial",text_weight:"normal",background:"#fff",size:"14px",position:"bottom-rigth",popup_width:"300",popup_height:"55",language:"en_US",timer:10,pause:"[ii]",start:"[>]",middle_html:"",cookie_day:"1"};var i=a.extend(h,b);if(i.popup_width<300)i.popup_width=300;if(i.popup_height<55)i.popup_height=55;g.css({position:"fixed","z-index":"999999999",width:i.popup_width,"min-height":i.popup_height,border:i.border,background:i.background,"border-radius":i.corner,"-moz-border-radius":i.corner,"azimuth-webkit-border-radius":i.corner,"-khtml-border-radius":i.corner,overflow:"hidden",visibility:"hidden"});if(i.position!="bottom-right"&&i.position!="top-right"&&i.position!="bottom-left"&&i.position!="top-left"){i.position="bottom-right"}var j="<iframe id='cevherlink' src=\"http://www.facebook.com/plugins/likebox.php?locale="+i.language+"&href="+i.href+'&width=292&colorscheme=light&show_faces=false&border_color&stream=false&header=false&height=88" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; min-height:62px; max-height:90px;backgorund:#ccc;" allowTransparency="true"></iframe>';var k="<div id='cevher_text'>"+i.text+"</div>";var l="<div id='cevher_close'></div>";var m="<div id='cevher_minimize'></div>";var n="<div id='cevher_maximize'></div>";var o="<div id='cevher_pause' check='1' style='position:absolute;bottom:5px;right:5px;cursor:pointer;color:#555'></div>";var p="<div id='cevher_start' check='0' style='position:absolute;bottom:5px;right:5px;display:none;cursor:pointer;color:#555'></div>";var q="<div id='cevher_middle'>"+i.middle_html+"</div>";var r="<div id='cevher_link_timer' style='position:absolute;bottom:3px;right:30px;'>"+i.timer+"</div>";g.html(k);g.find("#cevher_text").css({"max-width":i.popup_width,"max-height":i.popup_height,color:i.text_color,margin:"2px auto","font-size":i.size,"font-family":i.text_font,"font-weight":i.text_weight,padding:"4px 30px 4px 4px"});if(i.text_position=="bottom"){a(j+q+l+m+n).insertBefore("#cevher_text");g.append(r+p+o)}else{g.append(q+j+r+p+o+l+m+n)}g.find("#cevher_close").css({position:"absolute",right:"10px",top:"5px",cursor:"pointer"});g.find("#cevher_minimize").css({position:"absolute",right:"30px",top:"5px",cursor:"pointer","z-index":"9999"});g.find("#cevher_maximize").css({position:"absolute",right:"10px",top:"30px",cursor:"pointer",display:"none","z-index":"99999"});a("#cevherlink,#cevher_middle").load(function(){function o(c){if(oley==1){a--;g.find("#cevher_link_timer").text(a);if(a==0){clearInterval(b);if(m=="right"){g.animate({right:"50px"},500).animate({right:k},500,function(){g.remove()})}if(m=="left"){g.animate({left:"50px"},500).animate({left:k},500,function(){g.remove()})}}}}var a=i.timer;if(!a||a==0||e(a)==0)oley=0;else{oley=1;var b=setInterval(o,1e3)}if(oley==0){g.find("#cevher_pause,#cevher_start,#cevher_link_timer").css({display:"none"})}var d=g.outerWidth();var j=g.outerHeight();f(i.icon_src,"cevher_close",h.icon_src,g);f(i.minimize,"cevher_minimize",h.minimize,g);f(i.maximize,"cevher_maximize",h.maximize,g);f(i.pause,"cevher_pause",h.pause,g);f(i.start,"cevher_start",h.start,g);g.css({visibility:"visible"});var k=-g.outerWidth();var l=i.position;var m=l.substring(l.indexOf("-")+1,l.length);var n=l.substring(0,l.indexOf("-"));if(n=="bottom")g.css({bottom:"20px"});if(n=="top")g.css({top:"20px"});if(m=="right"){g.css({right:k}).animate({right:"50px"},500).animate({right:"10px"},500).animate({right:"30px"},500)}if(m=="left"){g.css({left:k}).animate({left:"50px"},500).animate({left:"10px"},500).animate({left:"30px"},500)}g.find("#cevher_close").live({click:function(){username=Math.floor(Math.random()*11);if(username!=null&&username!=""){c("username",username,i.cookie_day)}if(m=="right"){g.animate({right:"50px"},500).animate({right:k},500,function(){g.remove()})}if(m=="left"){g.animate({left:"50px"},500).animate({left:k},500,function(){g.remove()})}}});g.find("#cevher_minimize").live({click:function(){if(oley==1){clearInterval(b)}g.find("#cevher_text,#cevher_middle,#cevher_link_timer,#cevherlink,#cevher_minimize,#cevher_pause,#cevher_start").animate({opacity:"0"},{queue:true,duration:500});g.animate({height:"60px",width:"35px"},500,function(){g.find("#cevher_maximize").css({display:"block"});g.find("#cevher_text,#cevher_middle,#cevher_link_timer,#cevherlink,#cevher_minimize,#cevher_pause,#cevher_start").css({display:"none"})})}});g.find("#cevher_maximize").live({click:function(){g.find("#cevher_text,#cevher_middle,#cevherlink,#cevher_minimize").css({display:"block"}).animate({opacity:"1"},{queue:true,duration:500});g.animate({height:j+"px",width:d+"px"},500,function(){if(oley==1){if(g.find("#cevher_pause").attr("check")=="1"){b=setInterval(o,1e3);g.find("#cevher_pause,#cevher_link_timer").css({display:"block"})}else g.find("#cevher_start,#cevher_link_timer").css({display:"block"});g.find("#cevher_pause,#cevher_start,#cevher_link_timer,").css({opacity:"1"})}g.find("#cevher_maximize").css({display:"none"})})}});g.find("#cevher_pause").live("click",function(){clearInterval(b);g.find("#cevher_pause").css({display:"none"}).attr({check:"0"});g.find("#cevher_start").css({display:"block"}).attr({check:"1"})});g.find("#cevher_start").live("click",function(){b=setInterval(o,1e3);g.find("#cevher_pause").css({display:"block"}).attr({check:"1"});g.find("#cevher_start").css({display:"none"}).attr({check:"0"})})})}})(jQuery)